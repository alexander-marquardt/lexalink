application: app_name_here
version: yyyy-mm-dd-hhhh
runtime: python27
api_version: 1
threadsafe: yes

# define when static files expire
default_expiration: "30d"


builtins:
- remote_api: on

inbound_services:
- warmup

libraries:
- name: django
  version: latest

- name: PIL
  version: latest

handlers:
- url: /_ah/queue/deferred
  script: djangoappengine.deferred.handler.application
  login: admin

- url: /favicon.ico
  static_files: STATIC_DIR/images/BUILD_NAME/favicon.ico
  upload: STATIC_DIR/images/BUILD_NAME/favicon.ico


# The static directory will contain CSS, JS, Images, etc. 

- url: /styles
  static_dir: STATIC_DIR/styles
  
- url: /scripts
  static_dir: STATIC_DIR/scripts

# force browsers to load new images from the following directory, every time that we update to a new version.
- url: MANUALLY_VERSIONED_IMAGES_DIR
  static_dir: STATIC_DIR/images/manually_versioned_images
    
- url: /images
  static_dir: STATIC_DIR/images    

- url: /proprietary/styles
  static_dir: PROPRIETARY_STATIC_DIR/styles

- url: /proprietary/images
  static_dir: PROPRIETARY_STATIC_DIR/images
  
- url: /rs/admin/.+
  script: djangoappengine.main.application
  login: admin
  
- url: /_ah/.+
  script: djangoappengine.main.application
  login: admin

# if the videochat_window URL is called directly, then we execute the code to display the videochat
- url: /videochat_window/video_phone.html
  script: djangoappengine.main.application
  
  
- url: /_ah/stats/.*
  script: djangoappengine.appstats.application

- url: /media/admin
  static_dir: django/contrib/admin/media
  expiration: '0'

- url: /mapreduce/pipeline/images
  static_dir: mapreduce/lib/pipeline/ui/images

- url: /mapreduce(/.*)?
  script: djangoappengine.mapreduce.handler.application
  login: admin
  
  
- url: /.*
  script: djangoappengine.main.application

skip_files:
- ^(.*/)?#.*#$
- ^(.*/)?.*~$
- ^(.*/)?.*\.swp$
- ^(.*/)?.*\.py[co]$
- ^(.*/)?.*/RCS/.*$
- ^(.*/)?\..*$
- ^client/node_modules/.*
- ^client/.*\.json$
- ^client/test/.*
- ^client/Gruntfile\.js
