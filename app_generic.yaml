application: app_name_here
version: yyyy-mm-dd-hhhh
runtime: python27
api_version: 1
threadsafe: yes

# define when static files expire
default_expiration: "30d"


builtins:
- remote_api: on

inbound_services:
- warmup

libraries:
- name: django
  version: latest

- name: PIL
  version: latest

handlers:
- url: /_ah/queue/deferred
  script: djangoappengine.deferred.handler.application
  login: admin

- url: /favicon.ico
  static_files: rs/versioned_static/img/BUILD_NAME/favicon.ico
  upload: rs/versioned_static/img/BUILD_NAME/favicon.ico


# The static directory will contain CSS, JS, Images, etc. We re-map the directory location
# for each new build name to ensure that out-of-date static files will not be accessed through
# cached data (since the directory name changes, old caches will not be hit)

- url: /rs/versioned_static
  static_dir: rs/versioned_static
  
- url: /rs/proprietary/proprietary_versioned_static
  static_dir: rs/proprietary/proprietary_versioned_static
  
- url: /rs/admin/.+
  script: djangoappengine.main.application
  login: admin
  
- url: /_ah/.+
  script: djangoappengine.main.application
  login: admin

# if the videochat_window URL is called directly, then we execute the code to display the videochat
- url: /videochat_window/video_phone.html
  script: djangoappengine.main.application
  
  
# due to the way that Flash calls the other assets, they appear to be in the /videochat_window/ "directory", and therefore
# we expose these assets as static files so that the Flash can access them without having to modify the FlashBuilder-generated files
# Note: we have two symbolic links that point to the flash files. This is necessary because we cannot have static files and
# templates in the same directory (but we need them in the same directory).
- url: /videochat_window
  static_dir: rs/templates/video_phone_symlink2/bin-release 

- url: /_ah/stats/.*
  script: djangoappengine.appstats.application

- url: /media/admin
  static_dir: django/contrib/admin/media
  expiration: '0'

- url: /mapreduce/pipeline/images
  static_dir: mapreduce/lib/pipeline/ui/images

- url: /mapreduce(/.*)?
  script: djangoappengine.mapreduce.handler.application
  login: admin
  
  
- url: /.*
  script: djangoappengine.main.application
